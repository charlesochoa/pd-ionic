{"version":3,"sources":["webpack:///src/app/modules/login/login.page.scss","webpack:///src/app/modules/login/login.module.ts","webpack:///src/app/modules/login/login.page.html","webpack:///src/app/modules/login/login.page.ts"],"names":["LoginPageModule","imports","forChild","path","component","declarations","LoginPage","router","authService","alertController","checkoutService","toastController","email","url","t","getTransaction","create","cssClass","header","message","buttons","text","handler","window","open","alert","present","role","blah","console","log","login","subscribe","u","newCart","pk","c","cartPk","setLocalUser","then","r","navigate","err","error","user","username","duration","color","position","toast","selector","template"],"mappings":"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","file":"modules-login-login-module-es5.js","sourcesContent":["export default \"ion-header ion-toolbar {\\n  --background: var(--ion-color-danger);\\n}\\n\\n.my-custom-class {\\n  --white-space: 70px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFxsb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUU7RUFDRSxxQ0FBQTtBQURKOztBQU1BO0VBQ0UsbUJBQUE7QUFIRiIsImZpbGUiOiJsb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW9uLWhlYWRlciB7XHJcbiAgaW9uLXRvb2xiYXIge1xyXG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4ubXktY3VzdG9tLWNsYXNzIHtcclxuICAtLXdoaXRlLXNwYWNlOiA3MHB4O1xyXG59XHJcbiJdfQ== */\";","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { LoginPage } from './login.page';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild([{ path: '', component: LoginPage }])\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \"<ion-header background=\\\"danger\\\">\\n  <ion-toolbar>\\n      <ion-title slot=\\\"start\\\">\\n        <img\\n            src=\\\"../../../assets/images/icon.jpg\\\" height=\\\"40px\\\"\\n          />\\n      </ion-title>\\n    <ion-title slot=\\\"start\\\">\\n        <img\\n            src=\\\"../../../assets/images/letters.png\\\" height=\\\"20px\\\"\\n          />\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content >\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"register()\\\">\\n    <ion-grid>\\n      <ion-row justify-content-center>\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\n          <div text-center>\\n            <h3>El siguiente correo electrónico tendrá uso exclusivo para el estudio. Una vez terminado el mismo, se eliminarán de la base de datos.</h3>\\n          </div>\\n          <div padding>\\n            <ion-item>\\n              <ion-input name=\\\"email\\\" type=\\\"email\\\" placeholder=\\\"your@email.com\\\" [(ngModel)]=\\\"email\\\" required></ion-input>\\n            </ion-item>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\\n<ion-footer>\\n  <div padding>\\n    <ion-button  size=\\\"large\\\" (click)=\\\"register()\\\" [disabled]=\\\"form.invalid\\\" expand=\\\"block\\\" >¡Empezar!</ion-button>\\n  </div>\\n</ion-footer>\\n\";","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController, ToastController } from '@ionic/angular';\nimport { AuthService } from './auth.service';\nimport { CheckoutService } from '../checkout/checkout.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: 'login.page.html',\n  styleUrls: ['login.page.scss']\n})\nexport class LoginPage {\n  email: string = '';\n  url: string = 'https://docs.google.com/forms/d/e/1FAIpQLSfQkUY7lr72heFFt0wzwUWyAHVPYdwRDwBuZhu-K3B1JEKgJA/viewform'\n  constructor(\n    private router: Router,\n    private authService: AuthService,\n    private alertController: AlertController,\n    private checkoutService: CheckoutService,\n    public toastController: ToastController) {\n  }\n\n  async ionViewWillEnter() {\n    const t = this.authService.getTransaction();\n    this.email = '';\n    if (t) {\n\n      const alert = await this.alertController.create({\n        cssClass: 'my-custom-class',\n        header: 'Muchas gracias!',\n        message: 'Puedes acceder a la encuesta a través de: <a>https://docs.google.com/forms/d/e/1FAIpQLSfQkUY7lr72heFFt0wzwUWyAHVPYdwRDwBuZhu-K3B1JEKgJA/viewform</a>. <br><br>También hemos enviado el link a tu correo.',\n        buttons: [\n          {\n            text: 'Vamos a responderla!',\n            handler: () => {\n              window.open(this.url, \"_blank\");\n            }\n          }\n        ]\n      });\n  \n      alert.present();\n    }\n  }\n\n\n\n  async register() {\n\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Bienvenido!',\n      message: '<strong>1-</strong>Realiza una compra para ti y tus amigos <br><strong>2-</strong>No tienes limites de tiempo, ni dinero <br><strong>3-</strong>La prueba finaliza al ir al carrito y finalizar el pedido <br><strong>4-</strong>No requiere datos personales ni de pago es un prototipo<br><strong>5-</strong>Finalmente, contesta nuestra encuesta de satisfacción.',\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Vamos!',\n          handler: () => {\n            console.log('Confirm Okay');\n            this.authService.login(this.email).subscribe(async (u: any) => {\n              this.checkoutService.newCart(u.pk).subscribe(c => {\n                u.cartPk = c.pk\n                this.authService.setLocalUser(u).then( async r => {\n                  this.router.navigate(['tabs','menu']);\n                })\n              });\n            }, async err => {\n              if( err && err.error && err.error.user && err.error.user.username ) {\n                const toast = await this.toastController.create({\n                  message: 'Parece que has realizado ya esta prueba! Si aún no has hecho la encuesta de invitamos a revisar el correo que te hemos enviado para completarla.',\n                  duration: 6500,\n                  color: 'success',\n                  position: 'middle'\n                });\n                toast.present();\n              }\n            });\n          }\n        }\n      ]\n    });\n\n    alert.present();\n\n  }\n\n}\n"]}